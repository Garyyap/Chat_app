$(function(e){var a={number:["01","02","03","04","05","06","07","08","09","10","11","12"],"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"long":["January","February","March","April","May","June","July","August","September","October","November","December"]},t=new Date,r=t.getFullYear(),n=t.getMonth()+1;t.getDate();updateTheBirthDayValue=function(e,a,t,r,n){t*r*n!=0&&(10>r&&(r="0"+r),10>n&&(n="0"+n),hiddenDate=t+"-"+r+"-"+n,a.val(hiddenDate),e.callback&&e.callback(hiddenDate))},generateBirthdayPicker=function(t,i){var d=t.attr("id").replace(/-/g,""),l=e("<fieldset class='birthdayPicker'></fieldset>"),o=e("<select id='year' class='birthYear selectpicker padding-top-10 birthday_padding_right col-xs-4 col-md-4 "+i.sizeClass+"' name='"+d+"_birth[year]'></select>"),p=e("<select id='month' class='birthMonth selectpicker padding-top-10 birthday_padding_left col-xs-4 col-md-4 "+i.sizeClass+"' name='"+d+"_birth[month]'></select>"),s=e("<select id='day' class='birthDate selectpicker padding-top-10 birthday_padding_left birthday_padding_right col-xs-4 col-md-4 "+i.sizeClass+"' name='"+d+"_birth[day]'></select>");$birthday=e("<input class='birthDay' name='"+d+"_birthDay' type='hidden'/>"),i.placeholder&&(e("<option value='1'>Year</option>").appendTo(o),e("<option value='2'>Month</option>").appendTo(p),e("<option value='3'>Day</option>").appendTo(s)),"bigEndian"==i.dateFormat?l.append(o).append(p).append(s):"littleEndian"==i.dateFormat?l.append(s).append(p).append(o):l.append(p).append(s).append(o);var c=r-i.minAge,h=r-i.maxAge;i.maxYear!=r&&i.maxYear>r&&(c=i.maxYear,h+=i.maxYear-r);for(var u=c;u>=h;u--)e("<option></option>").attr("value",u).text(u).appendTo(o);for(var u=0;11>=u;u++)e("<option></option>").attr("value",u+1).text(a[i.monthFormat][u]).appendTo(p);for(var u=1;31>=u;u++){var f=10>u?"0"+u:u;e("<option></option>").attr("value",u).text(f).appendTo(s)}if(l.append($birthday),t.append(l),i.defaultDate){if("date"!==e.type(i.defaultDate)){var m=new Date(i.defaultDate);m.setSeconds(m.getSeconds()+60*m.getTimezoneOffset())}else var m=i.defaultDate;o.val(m.getFullYear()),p.val(m.getMonth()+1),s.val(m.getDate()),updateTheBirthDayValue(i,$birthday,m.getFullYear(),m.getMonth()+1,m.getDate())}l.on("change",function(){$birthday=e(this).find(".birthDay"),selectedYear=parseInt(o.val(),10),selectedMonth=parseInt(p.val(),10),selectedDay=parseInt(s.val(),10);var t=p.children(":last").val();if(selectedYear>r){if(t>n)for(;t>n;)p.children(":last").remove(),t--}else for(;12>t;)e("<option></option>").attr("value",parseInt(t)+1).text(a[i.monthFormat][t]).appendTo(p),t++;var d=s.children(":last").val(),l=new Date(selectedYear,selectedMonth,0).getDate();if(d>l)for(;d>l;)s.children(":last").remove(),d--;else if(l>d)for(;l>d;){var c=parseInt(d)+1,h=10>c?"0"+c:c;e("<option></option>").attr("value",c).text(h).appendTo(s),d++}updateTheBirthDayValue(i,$birthday,selectedYear,selectedMonth,selectedDay)})},e.fn.birthdayPicker=function(a){return this.each(function(){var t=e.extend(e.fn.birthdayPicker.defaults,a);generateBirthdayPicker(e(this),t)})},e.fn.birthdayPicker.defaults={maxAge:100,minAge:0,maxYear:r,dateFormat:"middleEndian",monthFormat:"number",placeholder:!0,defaultDate:!1,sizeClass:"span2",callback:!1}}(jQuery));